<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    {% load static %}
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Laralink">
    <!-- Favicon Icon -->
    <link rel="icon" href="assets/img/favicon.png" />
    <!-- Site Title -->
    <title>Vesperi</title>
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'animate.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'eventCard.css' %}">
    <link rel="stylesheet" href="https://unpkg.com/@webpixels/css@1.1.5/dist/index.css">
    <link rel="stylesheet" type="text/css" href="{% static '/vendors/jvectormap/jquery-jvectormap.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/vendors/flag-icon-css/css/flag-icon.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/vendors/owl-carousel-2/owl.carousel.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static '/vendors/owl-carousel-2/owl.theme.default.min.css' %}">
    <link rel=" stylesheet" type="text/css" href="{% static '/vendors/flag-icon-css/css/flag-icon.min.css' %}">
    <link rel=" stylesheet" type="text/css" href="{% static '/vendors/css/vendor.bundle.base.css' %}">
    <link rel=" stylesheet" type="text/css" href="{% static '/vendors/mdi/css/materialdesignicons.min.css' %}">
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" type="text/css" href="{% static 'style3.css' %}">
    <!-- End layout styles -->
    <link rel="shortcut icon" href="assets/images/favicon.png" />
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.0/font/bootstrap-icons.min.css">
</head>



<body class="cs-dark">

    <style>
        a {
            color: white;
        }

        a:hover {
            text-decoration: none;
            color: #0052FF;
        }
    </style>
    <div class="cs-preloader cs-white_bg cs-center">
        <div class="cs-preloader_in">
            <img src="{% static 'images/Haffel-ticket.svg' %}" alt="Logo">
        </div>
    </div>
    <!-- Start Header Section -->
    <header class="cs-site_header cs-style1 cs-sticky-header cs-primary_color text-uppercase cs-white_bg">
        <div class="cs-main_header">
            <div class="container">
                <div class="cs-main_header_in">
                    <div class="cs-main_header_left">
                        <a class="cs-site_branding cs-accent_color" href="index.html">
                            <img src="{% static 'images/Haffel-full-centered.png' %}" alt="Logo" class="cs-hide_white">

                        </a>
                    </div>
                    <div class="cs-main_header_center">
                        <div class="cs-nav">
                            <ul class="cs-nav_list">
                                <li class="menu-item-has-children"><a href="/org/homepage"
                                        class="cs-smoth_scroll">Home</a>
                                </li>
                                <li><a href="/org/Marketplace" class="cs-smoth_scroll">Games</a></li>
                                <li><a href="/org/create" class="cs-smoth_scroll">Create</a></li>
                                <li><a href="/org/myEvents" class="cs-smoth_scroll">Analytics</a></li>
                                <li><a href="" class="cs-smoth_scroll">Check-in</a></li>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="cs-main_header_right">
                        <div class="cs-toolbox">
                            <a class="cs-btn cs-btn_filed cs-accent_btn cs-modal_btn"
                                href="{% url 'Club:logoutUser' %}">Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- End Header Section -->
    <!-- End Header Section -->
    <div class="cs-height_80 cs-height_lg_80"></div>
    <!-- Start Team -->
    <section id="team">
        <div class="container">
            <div class="row">
                <div class="col-12 grid-margin stretch-card">
                    <div class="card corona-gradient-card">
                        <div class="card-body py-0 px-0 px-sm-3">

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-9">
                                    <div class="d-flex align-items-center align-self-start">
                                        <h3 class="mb-0">${{rev}}</h3>
                                        {% if ind == 0 %}
                                        <p class="text-danger ms-2 mb-0 font-weight-medium">{{delta}}%</p>
                                        {% elif ind == 1 %}
                                        <p class="text-success ms-2 mb-0 font-weight-medium">{{delta}}%</p>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="col-3">
                                    {% if ind == 0 %}
                                    <div class="icon icon-box-danger ">
                                        <span class="mdi mdi-arrow-bottom-right icon-item"></span>
                                    </div>
                                    {% elif ind == 1 %}
                                    <div class="icon icon-box-success ">
                                        <span class="mdi mdi-arrow-top-right icon-item"></span>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <h6 class="text-muted font-weight-normal">Current Month Revenue</h6>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-9">
                                    <div class="d-flex align-items-center align-self-start">
                                        <h3 id="royalty" class="mb-0"></h3>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="icon icon-box-warning">
                                        <span class=" mdi mdi-crown  "></span>
                                    </div>
                                </div>
                            </div>
                            <h6 class="text-muted font-weight-normal">Revenue from Royalties</h6>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-9">
                                    <div class="d-flex align-items-center align-self-start">
                                        <h3 class="mb-0" id="volume">fetching...</h3>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="icon icon-box-success">
                                        <span class="  mdi mdi-cash-multiple    "></span>
                                    </div>
                                </div>
                            </div>
                            <h6 class="text-muted font-weight-normal">Volume Traded</h6>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-9">
                                    <div class="d-flex align-items-center align-self-start">
                                        <h3 class="mb-0">{{att}}%</h3>
                                    </div>
                                </div>
                                <div class="col-3">
                                    <div class="icon icon-box-success ">
                                        <span class="mdi mdi-arrow-top-right icon-item"></span>
                                    </div>
                                </div>
                            </div>
                            <h6 class="text-muted font-weight-normal">Attendance Rate</h6>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Transaction History</h4>
                            {% for tr in transaction %}
                            <div class="bg-gray-dark d-flex d-md-block d-xl-flex flex-row px-4 px-md-3 px-xl-4 rounded mt-3"
                                style="background-color:#1e2c3c">
                                <div _ngcontent-eqf-c7="" class="text-md-center text-xl-left">
                                    <h6 _ngcontent-eqf-c7="" class="mb-1">{{tr.event_name}}</h6>
                                    <p _ngcontent-eqf-c7="" class="text-muted mb-0">by {{tr.name}} with token id :
                                        {{tr.token_id}}</p>
                                </div>

                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <div class="col-md-8 grid-margin stretch-card">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex flex-row justify-content-between">
                                <h4 class="card-title mb-1">Most Popular Games</h4>
                                <p class="text-muted mb-1">Revenue</p>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="preview-list">
                                        {% for games in pg %}
                                        <div class="preview-item border-bottom">
                                            <div class="preview-thumbnail">
                                                <img src="../../../media/{{games.img_url}}" alt="Image"
                                                    style="height: 4rem !important;width: 3rem !important; max-height: 55px !important; max-width: 55px !important;">
                                            </div>
                                            <div class="preview-item-content d-sm-flex flex-grow">
                                                <div class="flex-grow">
                                                    <h6 class="preview-subject">{{games.name}}</h6>
                                                    <p class="text-muted mb-0">{{games.date}}</p>
                                                </div>
                                                <div class="me-auto text-sm-right pt-2 pt-sm-0">
                                                    <h6 class="text-success ms-2 mb-0 font-weight-medium">
                                                        ${{games.total_revenue}}</h6>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-4 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h5>Most Sold out game</h5>
                            <div class="row">
                                <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                    <div class="d-flex d-sm-block d-md-flex align-items-center mb-3">
                                        <h2 class="mb-0 text-success ms-2 mb-0 font-weight-medium">
                                            ${{bestevent.revenue}}</h2>
                                    </div>
                                    <h6 class=" text-muted font-weight-normal">vs {{bestevent.name}}<br> on
                                        {{bestevent.date}}</h6>
                                </div>
                                <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                    <img src="../../../media/{{bestevent.img}}" alt="Image"
                                        style="height: 5rem !important;width: 4rem !important; max-height: 65px !important; max-width: 55px !important;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h5>Total Tickets sold</h5>
                            <div class="row">
                                <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                    <div class="d-flex d-sm-block d-md-flex align-items-center ">
                                        <h2 class="mb-0">{{numberoftickets}}</h2>
                                    </div>
                                    <h6 class=" text-muted font-weight-normal">Ticket sold on Bitaqat</h6>

                                </div>
                                <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                    <i class="icon-lg  mdi mdi-ticket  text-danger ms-auto"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-4 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h5>Purchase</h5>
                            <div class="row">
                                <div class="col-8 col-sm-12 col-xl-8 my-auto">
                                    <div class="d-flex d-sm-block d-md-flex align-items-center">
                                        <h2 class="mb-0">$2039</h2>
                                        <p class="text-danger ms-2 mb-0 font-weight-medium">-2.1% </p>
                                    </div>
                                    <h6 class="text-muted font-weight-normal">2.27% Since last month</h6>
                                </div>
                                <div class="col-4 col-sm-12 col-xl-4 text-center text-xl-right">
                                    <i class="icon-lg mdi mdi-monitor text-success ms-auto"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row ">
                <div class="col-12 grid-margin">
                    <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Per game analytics</h4>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>
                                                <div class="form-check form-check-muted m-0">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="form-check-input">
                                                    </label>
                                                </div>
                                            </th>
                                            <th> Game</th>
                                            <th> Place </th>
                                            <th> Date </th>
                                            <th> Price </th>
                                            <th> fans </th>
                                            <th> Royalty rate</th>
                                            <th> Payment Status </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for game in games %}
                                        <tr>
                                            <td>
                                                <div class="form-check form-check-muted m-0">
                                                    <label class="form-check-label">
                                                        <input type="checkbox" class="form-check-input">
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                <img src="../../../media/{{game.img}}" alt="Image"
                                                    style="height: 7% !important;width: 7% !important; ">
                                                <span class="ps-2">{{game.name}}</span>
                                            </td>
                                            <td> {{game.place}} </td>
                                            <td> {{game.date}} </td>
                                            <td> ${{game.price}} </td>
                                            <td> {{game.status}} </td>
                                            <td> {{game.royalty}}% </td>
                                            <td>
                                                <div>
                                                    <a href="{% url 'Club:eventDashboard' eventId=game.id %}"
                                                        class="btn btn-outline-success">More</a>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endfor %}

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>























            </center>
            <!-- End Services -->
            <div class="cs-height_70 cs-height_lg_45"></div>
            <!-- Start Tending Item -->
            <div class="cs-slider cs-style1 cs-gap-24 wow fadeIn" data-wow-duration="1s" data-wow-delay="0.3s">
                <div class="cs-slider_container" data-autoplay="1000" data-loop="1" data-speed="600" data-center="1"
                    data-fade-slide="0" data-slides-per-view="responsive" data-xs-slides="2" data-sm-slides="2"
                    data-md-slides="3" data-lg-slides="4" data-add-slides="6">
                </div><!-- .cs-slider_container -->
                <div class="cs-pagination cs-style1 cs-hide_desktop cs-accent_color"></div>
                <!-- <div class="cs-slider_arrows cs-style1 cs-center">
      <div class="cs-left_arrow cs-center cs-radius_3 cs-accent_bg_hover cs-white_bg cs-white_color_hover">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M16 4.32031L8 12.3203L16 20.3203" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>              
      </div>
      <div class="cs-right_arrow cs-center cs-radius_3 cs-accent_bg_hover cs-white_bg cs-white_color_hover">
        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 4.32031L16 12.3203L8 20.3203" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>              
      </div>
    </div> -->
            </div><!-- .cs-slider -->
            <!-- End Tending Item -->
            <div class="cs-height_90 cs-height_lg_65"></div>
            <!-- Start Fun Fact -->




            <script>
                fetch(`/org/balance/{{user_id}}`)
                    .then(response => response.json())
                    .then(data => {
                        // Extract the balance from the response
                        const balance = data.balance;
                        console.log(balance)
                        // Update the HTML with the balance
                        document.getElementById('royalty').innerHTML = "$" + balance;
                    })
                    .catch(error => {
                        console.log('Error:', error);
                    });


                fetch(`/org/volume/{{user_id}}`)
                    .then(response => response.json())
                    .then(data => {
                        // Extract the balance from the response
                        const volume = data.volume;
                        console.log(volume)
                        // Update the HTML with the balance
                        document.getElementById('volume').innerHTML = volume;
                    })
                    .catch(error => {
                        console.log('Error:', error);
                    });

            </script>




            <script src="{% static 'jquery-3.6.0.min.js' %}"></script>
            <script src="{% static 'jquery.slick.min.js' %}"></script>
            <script src="{% static 'jquery.counter.min.js' %}"></script>
            <script src="{% static 'wow.min.js' %}"></script>
            <script src="{% static 'ripples.min.js' %}"></script>
            <script src="{% static 'main.js' %}"></script>
            <script src="https://code.jquery.com/jquery-3.3.1.js" crossorigin="anonymous"></script>
            <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"
                crossorigin="anonymous"></script>
            <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"
                crossorigin="anonymous"></script>
</body>